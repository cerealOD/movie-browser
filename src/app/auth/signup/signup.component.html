<form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">
  <div class="text-center mb-8">
    <h1 class="text-2xl font-semibold">Create an account</h1>
    <p class="text-sm text-primary text-opacity-90">
      Save favorite movies by signing up!
    </p>
  </div>

  <div class="flex flex-col gap-4" role="group" aria-labelledby="signup-fields">
    <div class="flex flex-col gap-2">
      <label class="form-label" for="username">
        Username<span aria-hidden="true">*</span>
      </label>
      <input
        class="form-input"
        id="username"
        type="text"
        formControlName="username"
        placeholder="Choose a username"
        autocomplete="username"
        required
      />
    </div>

    <fieldset
      formGroupName="passwords"
      class="flex flex-col gap-4"
      aria-labelledby="password-group-label"
    >
      <legend id="password-group-label" class="sr-only">Password fields</legend>

      <div class="flex flex-col gap-2">
        <label class="form-label" for="password">
          Password<span aria-hidden="true">*</span>
        </label>
        <input
          class="form-input"
          id="password"
          type="password"
          formControlName="password"
          placeholder="Password"
          autocomplete="new-password"
          required
        />
        <p
          class="italic text-sm text-primary text-opacity-70"
          id="password-help"
        >
          Must be at least 6 characters long.
        </p>
        @if (form.get('passwords.password')?.touched && form.get('passwords.password')?.hasError('minlength')) {
          <p class="control-error" role="alert">
            Password must be at least 6 characters long
          </p>
        }
      </div>

      <div class="flex flex-col gap-2">
        <label class="form-label" for="confirm-password">
          Confirm Password<span aria-hidden="true">*</span>
        </label>
        <input
          class="form-input"
          id="confirm-password"
          type="password"
          formControlName="confirmPassword"
          placeholder="Password again"
          required
        />
        @if (form.get('passwords')?.touched && form.get('passwords')?.hasError('valuesNotEq')) {
          <p class="control-error" role="alert">Passwords do not match</p>
        }
      </div>
    </fieldset>
  </div>

  <button class="form-submit" type="submit" [disabled]="form.invalid">
    Sign Up
  </button>

  <p class="text-sm text-primary text-opacity-90 mt-3 text-center">
    Already have an account?
    <a
      routerLink="/auth/login"
      class="font-semibold hover:underline"
    >
      Log in!
    </a>
  </p>
</form>
